"use strict";(self.webpackChunkhasura_extra_github_io=self.webpackChunkhasura_extra_github_io||[]).push([[708],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return m}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),p=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=p(e.components);return r.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),h=p(n),m=a,d=h["".concat(c,".").concat(m)]||h[m]||u[m]||i;return n?r.createElement(d,l(l({ref:t},s),{},{components:n})):r.createElement(d,l({ref:t},s))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=h;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var p=2;p<i;p++)l[p]=n[p];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},8299:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return c},metadata:function(){return p},toc:function(){return s},default:function(){return h}});var r=n(7462),a=n(3366),i=(n(7294),n(3905)),l=["components"],o={id:"with-kubernetes-helm-chart",title:"V\u1edbi Kubernetes Helm chart",sidebar_title:"V\u1edbi Kubernetes Helm chart"},c=void 0,p={unversionedId:"deploying/with-kubernetes-helm-chart",id:"deploying/with-kubernetes-helm-chart",isDocsHomePage:!1,title:"V\u1edbi Kubernetes Helm chart",description:"T\xe0i li\u1ec7u n\xe0y d\xe0nh cho c\xe1c project b\u1eaft \u0111\u1ea7u b\u1eb1ng Symfony App.",source:"@site/i18n/vi/docusaurus-plugin-content-docs/current/08-deploying/02-with-kubernetes-helm-chart.md",sourceDirName:"08-deploying",slug:"/deploying/with-kubernetes-helm-chart",permalink:"/vi/deploying/with-kubernetes-helm-chart",editUrl:"https://github.com/hasura-extra/hasura-extra/edit/main/docusaurus/i18n/vi/docusaurus-plugin-content-docs/current/08-deploying/02-with-kubernetes-helm-chart.md",tags:[],version:"current",lastUpdatedBy:"Minh Vuong",lastUpdatedAt:1637836492,formattedLastUpdatedAt:"25/11/2021",sidebarPosition:2,frontMatter:{id:"with-kubernetes-helm-chart",title:"V\u1edbi Kubernetes Helm chart",sidebar_title:"V\u1edbi Kubernetes Helm chart"},sidebar:"main",previous:{title:"V\u1edbi Docker compose",permalink:"/vi/deploying/with-docker-compose"},next:{title:"V\u1edbi Hasura cloud",permalink:"/vi/deploying/with-hasura-cloud"}},s=[{value:"Deploy tr\xean KinD",id:"deploy-on-kind",children:[],level:2},{value:"Deploy tr\xean Kubernetes",id:"deploy-tr\xean-kubernetes",children:[],level:2}],u={toc:s};function h(e){var t=e.components,n=(0,a.Z)(e,l);return(0,i.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"T\xe0i li\u1ec7u n\xe0y d\xe0nh cho c\xe1c project b\u1eaft \u0111\u1ea7u b\u1eb1ng ",(0,i.kt)("a",{parentName:"p",href:"/vi/installation/symfony-app"},"Symfony App"),"."))),(0,i.kt)("h2",{id:"deploy-on-kind"},"Deploy tr\xean KinD"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://kind.sigs.k8s.io/"},"Kubernetes in Docker")," l\xe0 cluster local l\xfd t\u01b0\u1edfng \u0111\u1ec3 test th\u1eed Helm chart c\u1ee7a project tr\u01b0\u1edbc khi deploy l\xean m\xf4i tr\u01b0\u1eddng production,\n\u0111\u1ea7u ti\xean b\u1ea1n c\u1ea7n setup KinD theo h\u01b0\u1edbng d\u1eabn t\u1ea1i trang ch\u1ee7, sau \u0111\xf3 ",(0,i.kt)("a",{parentName:"p",href:"https://kind.sigs.k8s.io/docs/user/local-registry/"},"setup local registry"),", v\u1eady\nl\xe0 b\u1ea1n \u0111\xe3 chu\u1ea9n b\u1ecb xong m\xf4i tr\u01b0\u1eddng KinD r\u1ed3i \u0111\u1ea5y."),(0,i.kt)("p",null,"Ti\u1ebfp \u0111\u1ebfn h\xe3y build Docker image:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"docker-compose -f docker-compose.yaml build\n")),(0,i.kt)("p",null,"Push image l\xean local registry:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"docker-compose -f docker-compose.yaml push \n")),(0,i.kt)("p",null,"C\u1eadp nh\u1eadt Helm dependencies:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"helm dep update ./charts/api/\n")),(0,i.kt)("p",null,"V\xe0 b\u01b0\u1edbc cu\u1ed1i c\xf9ng l\xe0 install chart v\u1edbi c\xe1c c\u1ea5u h\xecnh m\u1eb7c \u0111\u1ecbnh:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"helm install api ./charts/api\n")),(0,i.kt)("p",null,"B\u1ea1n c\xf3 th\u1ec3 thay \u0111\u1ed5i 1 s\u1ed1 th\u1ed1ng s\u1ed1 tr\u1ef1c ti\u1ebfp t\u1ea1i ",(0,i.kt)("inlineCode",{parentName:"p"},"charts/api/values.yaml"),", l\u01b0u \xfd \u0111\u1ed1i v\u1edbi secret b\u1ea1n kh\xf4ng n\xean l\u01b0u tr\u1eef t\u1ea1i ",(0,i.kt)("inlineCode",{parentName:"p"},"values.yaml")," m\xe0 n\xean\nthi\u1ebft l\u1eadp khi install chart th\xf4ng qua ",(0,i.kt)("inlineCode",{parentName:"p"},"--set")," option ho\u1eb7c s\u1eed d\u1ee5ng c\xe1c c\xf4ng c\u1ee5 qu\u1ea3n l\xfd secrets nh\u01b0 ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/bitnami-labs/sealed-secrets"},"Binami Sealed Secrets"),"."),(0,i.kt)("p",null,"V\xed d\u1ee5 v\u1edbi ",(0,i.kt)("inlineCode",{parentName:"p"},"--set")," option:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"helm install api ./charts/api --set apache.appSecret=ChangeMe\n")),(0,i.kt)("h2",{id:"deploy-tr\xean-kubernetes"},"Deploy tr\xean Kubernetes"),(0,i.kt)("p",null,"Gi\u1ed1ng v\u1edbi c\xe1ch ",(0,i.kt)("a",{parentName:"p",href:"#deploy-on-kind"},"deploy tr\xean KinD")," ch\u1ec9 kh\xe1c l\xe0 ch\xfang ta c\u1ea7n push Docker image l\xean registry (Dockerhub, ECR, GCR, ACR...),\nsau khi push xong b\u1ea1n h\xe3y set image c\u1ee7a ",(0,i.kt)("inlineCode",{parentName:"p"},"apache")," container v\u1ec1 repository tr\xean registry m\xe0 b\u1ea1n ch\u1ecdn."),(0,i.kt)("p",null,"V\xed v\u1ee5:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"helm install api ./charts/api --set apache.image.repository=...\n")))}h.isMDXComponent=!0}}]);