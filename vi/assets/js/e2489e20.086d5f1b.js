"use strict";(self.webpackChunkhasura_extra_github_io=self.webpackChunkhasura_extra_github_io||[]).push([[412],{3905:function(n,e,t){t.d(e,{Zo:function(){return p},kt:function(){return m}});var a=t(7294);function i(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function r(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,a)}return t}function s(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?r(Object(t),!0).forEach((function(e){i(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function l(n,e){if(null==n)return{};var t,a,i=function(n,e){if(null==n)return{};var t,a,i={},r=Object.keys(n);for(a=0;a<r.length;a++)t=r[a],e.indexOf(t)>=0||(i[t]=n[t]);return i}(n,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(a=0;a<r.length;a++)t=r[a],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}var o=a.createContext({}),u=function(n){var e=a.useContext(o),t=e;return n&&(t="function"==typeof n?n(e):s(s({},e),n)),t},p=function(n){var e=u(n.components);return a.createElement(o.Provider,{value:e},n.children)},c={inlineCode:"code",wrapper:function(n){var e=n.children;return a.createElement(a.Fragment,{},e)}},h=a.forwardRef((function(n,e){var t=n.components,i=n.mdxType,r=n.originalType,o=n.parentName,p=l(n,["components","mdxType","originalType","parentName"]),h=u(t),m=i,d=h["".concat(o,".").concat(m)]||h[m]||c[m]||r;return t?a.createElement(d,s(s({ref:e},p),{},{components:t})):a.createElement(d,s({ref:e},p))}));function m(n,e){var t=arguments,i=e&&e.mdxType;if("string"==typeof n||i){var r=t.length,s=new Array(r);s[0]=h;var l={};for(var o in e)hasOwnProperty.call(e,o)&&(l[o]=e[o]);l.originalType=n,l.mdxType="string"==typeof n?n:i,s[1]=l;for(var u=2;u<r;u++)s[u]=t[u];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}h.displayName="MDXCreateElement"},1142:function(n,e,t){t.r(e),t.d(e,{frontMatter:function(){return l},contentTitle:function(){return o},metadata:function(){return u},toc:function(){return p},default:function(){return h}});var a=t(7462),i=t(3366),r=(t(7294),t(3905)),s=["components"],l={id:"graphqlite",title:"GraphQLite",sidebar_title:"GraphQLite"},o=void 0,u={unversionedId:"handle-business-logic/graphqlite",id:"handle-business-logic/graphqlite",isDocsHomePage:!1,title:"GraphQLite",description:"Hasura Extra t\xedch h\u1ee3p v\u1edbi GraphQLite \u0111\u1ec3 x\xe2y d\u1ef1ng GraphQL server handle business logic, n\u1ebfu nh\u01b0 b\u1ea1n ch\u01b0a bi\u1ebft v\u1ec1 n\xf3 th\xec tr\u01b0\u1edbc",source:"@site/i18n/vi/docusaurus-plugin-content-docs/current/03-handle-business-logic/02-graphqlite.md",sourceDirName:"03-handle-business-logic",slug:"/handle-business-logic/graphqlite",permalink:"/vi/handle-business-logic/graphqlite",editUrl:"https://github.com/hasura-extra/hasura-extra/edit/main/docusaurus/i18n/vi/docusaurus-plugin-content-docs/current/03-handle-business-logic/02-graphqlite.md",tags:[],version:"current",lastUpdatedBy:"Minh Vuong",lastUpdatedAt:1637776940,formattedLastUpdatedAt:"24/11/2021",sidebarPosition:2,frontMatter:{id:"graphqlite",title:"GraphQLite",sidebar_title:"GraphQLite"},sidebar:"main",previous:{title:"Th\xeam remote schema",permalink:"/vi/handle-business-logic/add-remote-schema"},next:{title:"Handle table event",permalink:"/vi/handle-event/handle-table-event"}},p=[{value:"Attributes",id:"attributes",children:[{value:"ArgNaming",id:"argnaming",children:[],level:3},{value:"ArgEntity",id:"argentity",children:[],level:3},{value:"ObjectAssertion",id:"objectassertion",children:[],level:3},{value:"Transactional",id:"transactional",children:[],level:3},{value:"Roles",id:"roles",children:[],level:3}],level:2},{value:"Scalar types",id:"scalar-types",children:[],level:2}],c={toc:p};function h(n){var e=n.components,t=(0,i.Z)(n,s);return(0,r.kt)("wrapper",(0,a.Z)({},c,t,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Hasura Extra t\xedch h\u1ee3p v\u1edbi GraphQLite \u0111\u1ec3 x\xe2y d\u1ef1ng GraphQL server handle business logic, n\u1ebfu nh\u01b0 b\u1ea1n ch\u01b0a bi\u1ebft v\u1ec1 n\xf3 th\xec tr\u01b0\u1edbc\nh\u1ebft n\xean \u0111\u1ecdc t\xe0i li\u1ec7u t\u1ea1i ",(0,r.kt)("a",{parentName:"p",href:"https://graphqlite.thecodingmachine.io/"},"\u0111\xe2y"),"."),(0,r.kt)("h2",{id:"attributes"},"Attributes"),(0,r.kt)("p",null,"D\u01b0\u1edbi \u0111\xe2y l\xe0 c\xe1c attributes c\u1ee7a GraphQLite m\u1edf r\u1ed9ng \u0111\u01b0\u1ee3c Hasura Extra cung c\u1ea5p"),(0,r.kt)("h3",{id:"argnaming"},"ArgNaming"),(0,r.kt)("p",null,"\u0110\xe2y l\xe0 m\u1ed9t attribute d\xf9ng cho vi\u1ec7c custom name c\u1ee7a field arg (m\u1eb7c \u0111\u1ecbnh field arg kh\xf4ng thay \u0111\u1ed5i \u0111\u01b0\u1ee3c v\xe0 l\u1ea5y theo PHP arg)."),(0,r.kt)("p",null,"V\xed d\u1ee5 ch\xfang ta c\xf3 resolver sau:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"use TheCodingMachine\\GraphQLite\\Annotations as GQL;\n\nclass Resolver \n{\n    #[GQL\\Query(name: 'arg_naming')]\n    public function __invoke(string $camelCase): string \n    {\n        return 'hello';\n    }\n    \n}\n")),(0,r.kt)("p",null,"Khi th\u1ef1c thi query get field ",(0,r.kt)("inlineCode",{parentName:"p"},"arg_naming")," s\u1ebd nh\u01b0 sau:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-GraphQL"},'query {\n    arg_naming(camelCase: "test")\n}\n')),(0,r.kt)("p",null,"V\xe0 ch\xfang ta s\u1ebd thay \u0111\u1ed5i field arg ",(0,r.kt)("inlineCode",{parentName:"p"},"camelCase")," sang ",(0,r.kt)("inlineCode",{parentName:"p"},"camel_case"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"use Hasura\\GraphQLiteBridge\\Attribute\\ArgNaming;\nuse TheCodingMachine\\GraphQLite\\Annotations as GQL;\n\nclass Resolver \n{\n    #[GQL\\Query(name: 'arg_naming')]\n    #[ArgNaming(for: 'camelCase', name: 'camel_case')]\n    public function __invoke(string $camelCase): string \n    {\n        return 'hello';\n    }\n    \n}\n")),(0,r.kt)("p",null,"C\xe2u query get field s\u1ebd th\xe0nh:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-GraphQL"},'query {\n    arg_naming(camel_case: "test")\n}\n')),(0,r.kt)("h3",{id:"argentity"},"ArgEntity"),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Attribute n\xe0y ch\u1ec9 d\xe0nh cho Symfony bundle"))),(0,r.kt)("p",null,"Attribute n\xe0y gi\xfap b\u1ea1n \u0111\u01a1n gi\u1ea3n h\xf3a vi\u1ec7c get Doctrine entity t\u1eeb user input v\xed d\u1ee5:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"use App\\Entity\\MyEntity;\nuse Doctrine\\ORM\\EntityManagerInterface;\nuse TheCodingMachine\\GraphQLite\\Annotations as GQL;\n\nclass Resolver \n{\n    public function __construct(private EntityManagerInterface $em)\n    {\n    }\n    \n    #[GQL\\Query(name: 'arg_entity')]\n    public function __invoke(int $id): string \n    {\n        $entity = $this->em->getRepository(MyEntity::class)->find($id);\n        \n        return 'hello';\n    }\n    \n}\n")),(0,r.kt)("p",null,"Resolver tr\xean s\u1ebd \u0111\u01b0\u1ee3c \u0111\u01a1n gi\u1ea3n h\xf3a khi s\u1eed d\u1ee5ng attribute ",(0,r.kt)("inlineCode",{parentName:"p"},"ArgEntity"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"use App\\Entity\\MyEntity;\nuse Hasura\\Bundle\\GraphQLite\\Attribute\\ArgEntity;\nuse TheCodingMachine\\GraphQLite\\Annotations as GQL;\n\nclass Resolver\n{\n    #[GQL\\Query(name: 'arg_entity')]\n    #[ArgEntity(for: 'entity')]\n    public function __invoke(MyEntity $entity): string \n    {\n        return 'hello';\n    }\n    \n}\n")),(0,r.kt)("p",null,"M\u1eb7c \u0111\u1ecbnh ",(0,r.kt)("inlineCode",{parentName:"p"},"ArgEntity")," s\u1ebd s\u1eed d\u1ee5ng ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," l\xe0 t\xean c\u1ee7a arg, graphql input type l\xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"ID"),", search tr\xean column name l\xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," v\xe0 Doctrine manager l\xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"null")," (default), trong tr\u01b0\u1eddng h\u1ee3p b\u1ea1n mu\u1ed1n custom l\u1ea1i th\xec b\u1ea1n c\xf3 th\u1ec3 truy\u1ec1n th\xeam th\xf4ng s\u1ed1:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"use App\\Entity\\Article;\nuse Hasura\\Bundle\\GraphQLite\\Attribute\\ArgEntity;\nuse TheCodingMachine\\GraphQLite\\Annotations as GQL;\n\nclass Resolver\n{\n    #[GQL\\Query(name: 'arg_entity')]\n    #[ArgEntity(for: 'article', argName: 'article_id', inputType: 'Int!', entityManager: 'custom')]\n    public function __invoke(Article $article): string \n    {\n        return 'hello';\n    }\n    \n}\n")),(0,r.kt)("h3",{id:"objectassertion"},"ObjectAssertion"),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Attribute n\xe0y ch\u1ec9 d\xe0nh cho Symfony bundle"))),(0,r.kt)("p",null,"Attribute n\xe0y gi\xfap b\u1ea1n validate object input"),(0,r.kt)("p",null,"Gi\u1ea3 s\u1eed nh\u01b0 ch\xfang ta c\xf3 Input object sau:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"use TheCodingMachine\\GraphQLite\\Annotations as GQL;\nuse Symfony\\Component\\Validator\\Constraints as Assert;\n\n#[GQL\\Input]\nclass Input \n{\n    #[GQL\\Field]\n    #[Assert\\NotBlank]\n    #[Assert\\Email]\n    public string $email;\n}\n")),(0,r.kt)("p",null,"V\xe0 resolver s\u1eed d\u1ee5ng input object tr\xean:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"use Hasura\\Bundle\\GraphQLite\\Attribute\\ObjectAssertion;\nuse TheCodingMachine\\GraphQLite\\Annotations as GQL;\n\nclass Resolver\n{\n    #[GQL\\Mutation(name: 'object_assertion')]\n    #[ObjectAssertion(for: 'input')]\n    public function __invoke(Input $input): bool \n    {\n        return true;\n    }\n    \n}\n")),(0,r.kt)("p",null,"Khi query mutation field ",(0,r.kt)("inlineCode",{parentName:"p"},"object_assertion")," m\xe0 tr\u1ea3 v\u1ec1 gi\xe1 tr\u1ecb ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," \u0111\u1ed3ng ngh\u0129a v\u1edbi property ",(0,r.kt)("inlineCode",{parentName:"p"},"email")," c\u1ee7a input object\nl\xe0 chu\u1ed7i email kh\xf4ng r\u1ed7ng, ng\u01b0\u1ee3c l\u1ea1i s\u1ebd b\xe1o l\u1ed7i."),(0,r.kt)("p",null,"M\u1eb7c \u0111\u1ecbnh ",(0,r.kt)("inlineCode",{parentName:"p"},"ObjectAssertion")," s\u1ebd th\u1ef1c thi validate tr\u01b0\u1edbc khi resolver \u0111\u01b0\u1ee3c g\u1ecdi, b\u1ea1n c\xf3 th\u1ec3 b\u1eadt mode\nsau khi resolver \u0111\u01b0\u1ee3c g\u1ecdi v\xe0 s\u1eed d\u1ee5ng k\u1ebft h\u1ee3p v\u1edbi ",(0,r.kt)("inlineCode",{parentName:"p"},"ArgEntity")," \u0111\u1ec3 validate th\xeam 1 l\u1ea7n n\u1eefa. V\xed d\u1ee5 ta c\xf3\nentity ",(0,r.kt)("inlineCode",{parentName:"p"},"User")," nh\u01b0 sau:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"namespace App\\Entity;\n\nuse Doctrine\\ORM\\Mapping as ORM;\nuse Symfony\\Bridge\\Doctrine\\Validator\\Constraints\\UniqueEntity;\n\n#[ORM\\Entity]\n#[UniqueEntity(fields: 'email')]\nclass User \n{\n    #[ORM\\Column(unique: true)]\n    private $email;\n    \n    public function setEmail(string $email): void \n    {\n        $this->email = $email;\n    }\n}\n")),(0,r.kt)("p",null,"v\xe0 mutation resolver ",(0,r.kt)("inlineCode",{parentName:"p"},"update_user")," field nh\u01b0 sau:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"use Hasura\\Bundle\\GraphQLite\\Attribute\\ArgEntity;\nuse Hasura\\Bundle\\GraphQLite\\Attribute\\ObjectAssertion;\nuse Hasura\\Bundle\\GraphQLite\\Attribute\\Transactional;\nuse TheCodingMachine\\GraphQLite\\Annotations as GQL;\n\nclass Resolver\n{\n    #[GQL\\Mutation(name: 'update_user')]\n    #[ArgEntity(for: 'user')]\n    #[ObjectAssertion(for: 'input')]\n    #[ObjectAssertion(for: 'user', mode: ObjectAssertion::AFTER_RESOLVE_CALL)]\n    #[Transactional]\n    public function __invoke(Input $input, User $user): bool \n    {\n        $user->setEmail($input->email);\n        \n        return true;\n    }\n    \n}\n")),(0,r.kt)("p",null,"Khi mutation field ",(0,r.kt)("inlineCode",{parentName:"p"},"update_user")," \u0111\u01b0\u1ee3c g\u1ecdi property ",(0,r.kt)("inlineCode",{parentName:"p"},"email")," c\u1ee7a object input \u0111\xe3 \u0111\u01b0\u1ee3c validate v\xe0 ch\xfang ta s\u1eed d\u1ee5ng property \u0111\xf3 \u0111\u1ec3 set email cho entity\nUser, ti\u1ebfp \u0111\u1ebfn resolver s\u1ebd tr\u1ea3 v\u1ec1 ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," v\xe0 \u0111\u1ed3ng th\u1eddi entity User s\u1ebd \u0111\u01b0\u1ee3c validate n\u1ebfu nh\u01b0 field ",(0,r.kt)("inlineCode",{parentName:"p"},"email")," kh\xf4ng t\u1ed3n t\u1ea1i tr\xean DB th\xec\nentity s\u1ebd \u0111\u01b0\u1ee3c update v\xe0 flush v\xe0o DB nh\u1edd ",(0,r.kt)("inlineCode",{parentName:"p"},"Transactional")," attribute xem th\xeam t\u1ea1i b\xean d\u01b0\u1edbi, ng\u01b0\u1ee3c l\u1ea1i s\u1ebd b\xe1o l\u1ed7i ",(0,r.kt)("inlineCode",{parentName:"p"},"email")," kh\xf4ng unique."),(0,r.kt)("h3",{id:"transactional"},"Transactional"),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Attribute n\xe0y ch\u1ec9 d\xe0nh cho Symfony bundle"))),(0,r.kt)("p",null,"Attribute n\xe0y s\u1ebd wrap resolver c\u1ee7a b\u1ea1n trong m\u1ed9t Doctrine transaction, n\u1ebfu nh\u01b0 c\xf3 b\u1ea5t k\u1ef3 exception n\xe0o x\u1ea3y ra trong resolver c\u1ee7a b\u1ea1n th\xec to\xe0n b\u1ed9 SQL query\ns\u1ebd \u0111\u01b0\u1ee3c rollback, ng\u01b0\u1ee3c l\u1ea1i n\u1ebfu kh\xf4ng, c\xe1c entities \u0111ang managed b\u1edfi Entity Manager s\u1ebd \u0111\u01b0\u1ee3c flush v\xe0o database. Ngo\xe0i ra attribute n\xe0y c\xf2n c\xf3 t\xednh n\u0103ng\nt\u1ef1 \u0111\u1ed9ng persist \u0111\u1ed1i v\u1edbi c\xe1c entity v\u1eeba \u0111\u01b0\u1ee3c kh\u1edfi t\u1ea1o (state new), v\xed d\u1ee5:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"use Hasura\\Bundle\\GraphQLite\\Attribute\\ObjectAssertion;\nuse Hasura\\Bundle\\GraphQLite\\Attribute\\Transactional;\nuse TheCodingMachine\\GraphQLite\\Annotations as GQL;\n\nclass Resolver\n{\n    #[GQL\\Mutation(name: 'insert_user')]\n    #[ObjectAssertion(for: 'input')]\n    #[Transactional]\n    public function __invoke(Input $input): User \n    {\n        $user = new User();\n        $user->setEmail($input->email);\n        \n        return $user;\n    }\n    \n}\n")),(0,r.kt)("p",null,"Khi mutation field ",(0,r.kt)("inlineCode",{parentName:"p"},"insert_user")," \u0111\u01b0\u1ee3c g\u1ecdi th\xec object User s\u1ebd \u0111\u01b0\u1ee3c kh\u1edfi t\u1ea1o th\xf4ng qua input object c\u1ee7a end-user\nv\xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"Transactional")," attribute s\u1ebd t\u1ef1 \u0111\u1ed9ng persist n\xf3 gi\xfap b\u1ea1n, sau \u0111\xf3 s\u1ebd flush v\xe0o database."),(0,r.kt)("p",null,"N\u1ebfu project c\u1ee7a b\u1ea1n c\xf3 nhi\u1ec1u database connections th\xec b\u1ea1n c\xf3 th\u1ec3 ch\u1ec9 \u0111\u1ecbnh Entity Manager th\xf4ng qua th\xf4ng s\u1ed1 ",(0,r.kt)("inlineCode",{parentName:"p"},"entityManager")," nh\u01b0 sau:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"#[Transactional(entityManager: 'custom')]\n")),(0,r.kt)("h3",{id:"roles"},"Roles"),(0,r.kt)("p",null,"Attribute n\xe0y d\xf9ng cho authorization kh\xe1c v\u1edbi ",(0,r.kt)("a",{parentName:"p",href:"https://graphqlite.thecodingmachine.io/docs/authentication-authorization#logged-and-right-annotations"},"Right")," attribute,\nn\xf3 h\u1ed5 tr\u1ee3 b\u1ea1n th\xeam \u0111\u01b0\u1ee3c nhi\u1ec1u roles c\xf9ng 1 l\xfac v\xe0 h\u1ed5 tr\u1ee3 ",(0,r.kt)("a",{parentName:"p",href:"/vi/manage-metadata/persist-application-state-metadata"},"persist-state")," sync roles l\xean remote schema permissions."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"use Hasura\\GraphQLiteBridge\\Attribute\\Roles;\nuse TheCodingMachine\\GraphQLite\\Annotations as GQL;\n\nclass Resolver\n{\n    #[GQL\\Mutation(name: 'hello')]\n    #[Roles('ROLE_USER', 'ROLE_ADMIN')]\n    public function __invoke(Input $input): string \n    {\n        return 'world';\n    }\n}\n")),(0,r.kt)("h2",{id:"scalar-types"},"Scalar types"),(0,r.kt)("p",null,"Hasura Extra cung c\u1ea5p ",(0,r.kt)("a",{parentName:"p",href:"https://graphqlite.thecodingmachine.io/docs/custom-types#registering-a-custom-scalar-type-advanced"},"custom scalar types")," compatible v\u1edbi Hasura gi\xfap cho vi\u1ec7c t\u1ea1o\n",(0,r.kt)("a",{parentName:"p",href:"https://hasura.io/docs/latest/graphql/core/databases/postgres/schema/remote-relationships/remote-schema-relationships.html"},"data federation"),"\nthu\u1eadn ti\u1ec7n h\u01a1n:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"json"),(0,r.kt)("li",{parentName:"ul"},"jsonb"),(0,r.kt)("li",{parentName:"ul"},"timestamptz"),(0,r.kt)("li",{parentName:"ul"},"timetz"),(0,r.kt)("li",{parentName:"ul"},"date"),(0,r.kt)("li",{parentName:"ul"},"uuid")),(0,r.kt)("p",null,"Ngo\xe0i ra b\u1ea1n c\xf2n c\xf3 th\u1ec3 \u1ee9ng d\u1ee5ng c\xe1c type tr\xean \u0111\u1ec3 validate user input format."),(0,r.kt)("p",null,"C\xe1ch s\u1eed d\u1ee5ng:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"#[Query(name: 'test_scalar', outputType: 'json')]\npublic function __invoke(\n    #[UseInputType(inputType: 'date')] ?\\DateTimeInterface $date = null,\n    #[UseInputType(inputType: 'json')] ?array $json = null,\n    #[UseInputType(inputType: 'jsonb')] ?array $jsonb = null,\n    #[UseInputType(inputType: 'timestamptz')] ?\\DateTimeInterface $timestamptz = null,\n    #[UseInputType(inputType: 'timetz')] ?\\DateTimeInterface $timetz = null,\n    ?Uuid $uuid = null,\n): array {\n    return compact(\n        'date', \n        'json', \n        'jsonb', \n        'timestamptz',\n        'timetz',\n        'uuid'\n    );\n}\n")))}h.isMDXComponent=!0}}]);